{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "mq2macro",
	"patterns": [
		{ "include": "#comment" },
		{ "include": "#preprocessor" },
        { "include": "#sub" },
		{ "include": "#invalid-illegalcharacters" }
	],
	"repository": {
		"strings": {
			"begin": "\"",
			"beginCaptures": {"0": {"name": "punctuation.separator.par.mq2macro"}},
			"end": "\"",
			"endCaptures": {"0": {"name": "punctuation.separator.par.mq2macro"}},
			"patterns": [
				{ "include": "#variabledelimiter"},
				{"include": "#substringparam"}
			]
		},
		"comment": {
			"patterns": [{
				"name": "comment.block.cs",
				"begin": "\\s*\\|\\*{2}",
				"beginCaptures": {
					"0": { "name": "punctuation.definition.comment.mq2macro" }
				},
				"end": "\\*{2}\\|",
				"endCaptures": {
					"0": { "name": "punctuation.definition.comment.mq2macro" }
				},
				"patterns": 
				[
					{
						"match": ".",
						"captures": {"0": {"name": "comment.block.documentation" } }
					}
				]
			},
			{
				"name": "comment.line.pipe.mq2macro",
				"begin": "(^\\s+)?(?=\\|)",
				"beginCaptures": {
					"0": { "name": "punctuation.whitespace.comment.leading.mq2macro" }
				},
				"end": "(?=$)"
			},
			{
				"name": "comment.line.pipe.mq2macro",
				"begin": "(?<!\\|)\\|(?!\\|)",
				"beginCaptures": {
					"0": {
						"name": "punctuation.definition.comment.mq2macro"
					}
				},
				"end": "(?=$)"
			}]
		},
		"preprocessor": {
			"name": "meta.preprocessor.mq2macro",
			"begin": "^\\s*(\\#)\\s*",
			"beginCaptures": {
				"1": {
					"name": "punctuation.separator.hash.mq2macro"
				}
			},
			"end": "(?<=$)",
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#preprocessor-event" },
				{ "include": "#preprocessor-turbo" },
				{ "include": "#preprocessor-include" },
				{ "include": "#preprocessor-chat" },
				{ "include": "#preprocessor-warning" },
				{ "include": "#preprocessor-define" },
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"preprocessor-event": {
			"begin": "\\b((?i)event)\\b\\s*\\b([_[:alpha:]][_[:alnum:]]*)\\b",
			"beginCaptures": {
				"1": { "name": "keyword.preprocessor.region.mq2macro" },
				"2": { "name": "entity.name.variable.preprocessor.symbol.mq2macro" }
			},
			"end": "(?=$)",
			"patterns": [
				{
					"match": "\\\"[^\"]*\\\"",
					"captures": {
						"0": { "name": "string.quoted.double.cs" }
					}
				},
				{ "include": "#comment" },
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"preprocessor-turbo": {
			"begin": "\\b((?i)turbo)\\b\\s*",
			"beginCaptures": {
				"1": { "name": "keyword.preprocessor.turbo.mq2macro" }
			},
			"end": "(?=$)",
			"patterns": [
				{
					"match": "\\b([0-9]+)\\b",
					"captures": {
						"0": { "name": "constant.numeric.int.mq2macro" }
					}
				},
				{ "include": "#comment" },
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"preprocessor-include": {
			"begin": "\\b((?i)include)\\b\\s*\\b([_[:alpha:]][ \\.\\/\\\\_[:alnum:]]*)",
			"beginCaptures": {
				"1": { "name": "keyword.preprocessor.region.mq2macro" },
				"2": { "name": "string.unquoted.mq2macro" }
			},
			"end": "(?=$)",
			"patterns": [
				{ "include": "#comment" }
			]
		},
		"preprocessor-define": {
			"begin": "\\b((?i)define)\\b\\s*([\\/_[:alpha:]][_[:alnum:]]*)\\b([^|]*)",
			"beginCaptures": {
				"1": { "name": "keyword.preprocessor.define.mq2macro" },
				"2": { "name": "entity.name.variable.preprocessor.symbol.mq2macro" },
				"3": { "name": "string.unquoted.mq2macro" }
			},
			"end": "(?=$)",
			"patterns": [
				{ "include": "#comment" }
			]
		},
		"preprocessor-warning": {
			"begin": "\\b((?i)warning)\\b",
			"beginCaptures": {
				"1": { "name": "keyword.preprocessor.warning.mq2macro" }
			},
			"end": "(?=$)",
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"preprocessor-chat": {
			"begin": "\\b((?i)chat)\\b\\s*(\\b[_[:alpha:]][_[:alnum:]]*\\b)\\s*",
			"beginCaptures": {
				"1": { "name": "keyword.preprocessor.chat.mq2macro" },
				"2": { "patterns": [{ "include": "#constant-chat" }]}
			},
			"end": "(?=$)",
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"invalid-illegalcharacters": {
				"match": "\\S+",
				"captures": {
					"0": { "name": "invalid.illegal.mq2macro" }
				}
		},
		"invalid-illegalcharacter": {
			"match": "\\S",
			"captures": {
				"0": { "name": "invalid.illegal.mq2macro" }
			}
	},
		"sub": {
			"name": "meta.sub.mq2macro",
			"begin": "^\\s*((?i)Sub)\\s+((?i)Event_)?([_[:alpha:]][_[:alnum:]]*)(\\([^\\)\\|]*\\))?",
			"beginCaptures": {
				"1": { "name": "keyword.other.mq2macro" },
				"2": { "name": "keyword.other.mq2macro" },
				"3": { "name": "entity.name.function.mq2macro"},
				"4": { "patterns": [{ "include": "#parenthesized-parameter-list" }]}
			},
			"end": "^\\s*(\\/(?i)return\\b.*)(?=$)",
			"endCaptures": {
				"1": { "patterns": [{ "include": "#mq2slashcommand"}]}
			},
			"patterns": [{ "include": "#subbody" }]
		},
		"subbody": {
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#gotolabel"},
				{ "include": "#mq2slashcommand-ifblock"},
				{ "include": "#mq2slashcommand-elseif" },
				{ "include": "#mq2slashcommand-forblock"},
				{ "include": "#mq2slashcommand" },
				{ "include": "#variabledelimiter"},
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"gotolabel":
		{
			"match": "^\\s*(:)([^\\s\\n\\r\\[\\|\\]]+)\\s*([^\\n\\r]*)\\s*(?=$)",
			"captures": {
				"1": { "name": "punctuation.parenthesis.open.mq2macro" },
				"2": { "name": "markup.heading.mq2macro"},
				"3": {"patterns": [
					{"include": "#comment"},
					{"include": "#invalid-illegalcharacters"}						
				]}
			}
		},
		"mq2slashcommand": {
			"name": "meta.mq2slashcommand.mq2macro",
			"begin": "\\s*(\\/)",
			"beginCaptures": {
				"1": {
					"name": "punctuation.separator.fowardslash.mq2macro"
				}
			},
			"end": "((?=\\/)|(?<=$))",
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#mq2slashcommand-aa"},
				{ "include": "#mq2slashcommand-alias"},
				{ "include": "#mq2slashcommand-alert"},
				{ "include": "#mq2slashcommand-altctrshiftsquelch"},
				{ "include": "#mq2slashcommand-bind"},
				{ "include": "#mq2slashcommand-buyitem"},
				{ "include": "#mq2slashcommand-call"},
				{ "include": "#mq2slashcommand-click"},
				{ "include": "#mq2slashcommand-declare"},
				{ "include": "#mq2slashcommand-deletevar"},
				{ "include": "#mq2slashcommand-delay"},
				{ "include": "#mq2slashcommand-doevents" },
				{ "include": "#mq2slashcommand-keypress" },
				{ "include": "#mq2slashcommand-mac"},
				{ "include": "#mq2slashcommand-macro"},
				{ "include": "#mq2slashcommand-mqlogclear"},
				{ "include": "#mq2slashcommand-echo" },
				{ "include": "#mq2slashcommand-if" },
				{ "include": "#mq2slashcommand-ini" },
				{ "include": "#mq2slashcommand-goto" },
				{ "include": "#mq2slashcommand-return" },
				{ "include": "#mq2slashcommand-singles" },
				{ "include": "#mq2slashcommand-varcalc" },
				{ "include": "#mq2slashcommand-vardata" },
				{ "include": "#mq2slashcommand-varset" },
				{ "include": "#mq2slashcommand-unsupported"},
				{ "include": "#mq2slashcommand-windowstate"},
				{ "include": "#eqslashcommand-unsupported"},
				{ "include": "#mq2eqbc-slashcommand-unsupported"},
				{ "include": "#mq2cast-slashcommand-unsupported"},
				{ "include": "#mq2slashcommand-ifblock"},
				{ "include": "#mq2slashcommand-elseif" },
				{ "include": "#mq2slashcommand-forblock"},
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"mq2slashcommand-aa": {
			"match": "\\b((?i)aa)\\b\\s*(\\b[^|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
					{
						"match": "(?<=\\/aa )\\blist (all|timers)\\b",
						"captures": { "0": {"name": "keyword.control.alert.mq2macro"}}
					},
					{
						"match": "(?<=\\/aa )\\b(info|act)\\b\\s*((?<vb>\\s*\\${(?:[^\\$}]|\\g<vb>)+}\\s*))",
						"captures": { 
							"1": {"name": "keyword.control.alert.mq2macro"},
							"2": {"patterns": [
								{"include": "#variabledelimiter"}
							]}
						}
					},
					{
						"match": "(?<=\\/aa )\\b(info|act)\\b\\s*([0-9]+)",
						"captures": { 
							"1": {"name": "keyword.control.alert.mq2macro"},
							"2": {"name": "constant.numeric.mq2macro"}
						}
					},
					{
						"match": "(?<=\\/aa )\\b(info|act)\\b\\s*(\\b[ :_[:alnum:]]+)",
						"captures": { 
							"1": {"name": "keyword.control.alert.mq2macro"},
							"2": {"name": "string.unquoted.mq2macro"}
						}
					},
					{ "include": "#invalid-illegalcharacters" }
					]}
			}
		},
		"mq2slashcommand-alert": {
			"match": "\\b((?i)alert)\\b\\s*(\\b[^|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
					{
						"match": "(?<=\\/alert )\\b(clear|list)\\b\\s*(([0-9]+)|((?<vb>\\s*\\${(?:[^\\$}]|\\g<vb>)+}\\s*)))\\s*",
						"captures": {
							"1": { "name": "keyword.control.alert.clearlist.mq2macro" },
							"3": { "name": "constant.numeric.int.mq2macro" },
							"4": {"patterns": [
								{"include": "#variabledelimiter"}
							]}
						}
					},
					{
						"match": "(?<=\\/alert )\\b(add|remove)\\b\\s*(([0-9]+)|((?<vb>\\s*\\${(?:[^\\$}]|\\g<vb>)+}\\s*)))\\s*([^|]*)",
						"captures": {
							"1": { "name": "keyword.control.alert.addremove.mq2macro" },
							"3": { "name": "constant.numeric.int.mq2macro" },
							"4": {"patterns": [
								{"include": "#variabledelimiter"},
								{"include": "#invalid-illegalcharacters"}
							]},
							"6": {
								"patterns": [
									{
										"match": "(?i)(\\b(pc|npc|corpse|any)\\b\\s*)?(((\\s*\\bradius\\b\\s*)(([0-9]+)|((?<vb>\\s*\\${(?:[^\\$}]|\\g<vb>)+}\\s*))))((\\s*\\brange\\b\\s*)(([0-9]+)|((?<rb>\\s*\\${(?:[^\\$}]|\\g<rb>)+}\\s*)))\\s+(([0-9]+)|((?<xrb>\\s*\\${(?:[^\\$}]|\\g<xrb>)+}\\s*))))?|((\\s*\\brange\\b\\s*)(([0-9]+)|((?<yrb>\\s*\\${(?:[^\\$}]|\\g<yrb>)+}\\s*)))\\s+(([0-9]+)|((?<brb>\\s*\\${(?:[^\\$}]|\\g<brb>)+}\\s*))))((\\s*\\bradius\\b\\s*)(([0-9]+)|((?<sb>\\s*\\${(?:[^\\$}]|\\g<sb>)+}\\s*))))?)?(\\s*\"[^\"|\\r\\n]*\")?([^|\\n\\r]*)(?=\\s*$)",
										"captures": {
											"2": {"name": "entity.name.type.mq2macro"},
											"5": { "name": "keyword.control.alert.radius.mq2macro" },
											"7": { "name": "constant.numeric.int.mq2macro" },
											"8": {"patterns": [
												{"include": "#variabledelimiter"}
											]},
											"11": { "name": "keyword.control.alert.range.mq2macro" },
											"13": { "name": "constant.numeric.int.mq2macro" },
											"14": {"patterns": [
												{"include": "#variabledelimiter"}
											]},
											"17": { "name": "constant.numeric.int.mq2macro" },
											"18": {"patterns": [
												{"include": "#variabledelimiter"}
											]},
											"21": { "name": "keyword.control.alert.range.mq2macro" },
											"23": { "name": "constant.numeric.int.mq2macro" },
											"24": {"patterns": [
												{"include": "#variabledelimiter"}
											]},
											"27": { "name": "constant.numeric.int.mq2macro" },
											"28": {"patterns": [
												{"include": "#variabledelimiter"}
											]},
											"31": { "name": "keyword.control.alert.radius.mq2macro" },
											"33": { "name": "constant.numeric.int.mq2macro" },
											"34": {"patterns": [
												{"include": "#variabledelimiter"}
											]},
											"36": {"name": "string.quoted.mq2macro"},
											"37": {"patterns": [
												{"include": "#invalid-illegalcharacters"}
											]}
										}					
									},
									{"include": "#invalid-illegalcharacters"}
								]
							}
						}
					},
					{ "include": "#invalid-illegalcharacters" }
				]}
			}
		},
		"mq2slashcommand-alias": {
			"match": "\\b((?i)alias)\\b\\s*([^|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"match": "(?i)(?<=\\/alias )\\s*\\b(list)\\b",
							"captures": {
								"1": { "name": "keyword.control.alias.list.mq2macro" }
							}
						},
						{
							"match": "(?i)(?<=\\/alias )\\s*(\\/[^\\r\\n\\s]+)\\s*((\\bdelete)|([^|\\r\\n]*))(?=\\s*$)",
							"captures": {
								"1": { "name": "entity.name.variable.mq2macro" },
								"3": { "name": "keyword.control.alias.delete.mq2macro" },
								"4": {"patterns": [{"include": "#mq2slashcommand"}]}
							}
						},
						{"include": "#invalid-illegalcharacters"}
					]
				}
			}
		},
		"mq2slashcommand-altctrshiftsquelch": {
			"match": "(?i)\\b(squelch|ctrlkey|altkey|shiftkey|nomodkey|noparse|ctrl|alt|shift|nomod)\\b\\s*",
			"captures": {
				"1": { "name": "keyword.control.squelch.mq2macro" }
			}
		},
		"mq2slashcommand-bind": {
			"match": "\\b((?i)bind)\\b\\s*([^\\n\\r]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"match": "(?i)(?<=\\/bind )\\s*\\b(list|eqlist)\\b([^\\n\\r]*)(?=\\s*$)",
							"captures": {
								"1": { "name": "keyword.control.bind.eqlist.mq2macro" },
								"2": {"patterns": [
									{"include": "#comment"},
									{"include": "#invalid-illegalcharacters"}
									]}
							}
						},
						{
							"match": "(?i)\\s*(~)?([^\\n\\r\\s]*)\\s+((\\bclear)(\\s+[^\\n\\r]*)?|((alt|shift|ctrl)(\\+))?((alt|shift|ctrl)(\\+))?((alt|shift|ctrl)(\\+))?([\\S]+)(\\s+[^\\n\\r]*)?)(?=\\s*$)",
							"captures": {
								"1": { "name": "keyword.operator.tilda.mq2macro" },
								"2": { "name": "support.variable.mq2macro" },
								"4": { "name": "keyword.control.bind.eqlist.mq2macro" },
								"5": {"patterns": [
									{"include": "#comment"},
									{"include": "#invalid-illegalcharacters"}
									]},
								"7": { "name": "keyword.other.mq2macro" },
								"8": { "name": "keyword.operator.plus.mq2macro" },
								"10": { "name": "keyword.other.mq2macro" },
								"11": { "name": "keyword.operator.plus.mq2macro" },
								"13": { "name": "keyword.other.mq2macro" },
								"14": { "name": "keyword.operator.tilda.mq2macro" },
								"15": { "name": "keyword.other.mq2macro" },
								"16": {"patterns": [
									{"include": "#comment"},
									{"include": "#invalid-illegalcharacters"}
									]}
								}
						},
						{"include": "#invalid-illegalcharacters"}
					]
				}
			}
		},
		"mq2slashcommand-buyitem": {
			"match": "\\b((?i)buyitem)\\b\\s*([0-9]+)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "name": "constant.numeric.int.mq2macro" }
			}
		},
		"mq2slashcommand-call": {
			"match": "(?i)\\b(call)\\b([^\\n\\r]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"begin": "(?i)(?<=\\/call)\\s+(?i)(Event_)?",
							"beginCaptures": { 
								"1": {"name": "keyword.other.mq2macro"}
							},
							"end": "(?<=[\\S])(?=\\s)",
							"patterns": [
								{"include": "#constantdecimal"},
								{"include": "#constantbool"},
								{"include": "#variabledelimiter"},
								{"include": "#subnamepartial"},
								{"include": "#comment"},
								{"include": "#invalid-illegalcharacters"}	
							]
						},
						{"include": "#spacedelimiter"}
					]
				}
			}
		},
		"mq2slashcommand-click": {
			"match": "(?i)\\b(click)\\s+(left|right)(\\s+(center|target)\\b)?([^\\n\\r]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "name": "keyword.control.alert.mq2macro" },
				"4": { "name": "keyword.control.alert.mq2macro" },
				"5": { "patterns": [
					{"include": "#comment"},
					{"include": "#invalid-illegalcharacters"}						
					]
				}
			}
		},
		"mq2slashcommand-macro": {
			"match": "(?i)\\b(macro)\\b([^\\n\\r]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"begin": "(?i)(?<=\\/macro)\\s+",
							"end": "(?<=[\\S])(?=\\s)",
							"patterns": [
								{"include": "#constantdecimal"},
								{"include": "#constantbool"},
								{"include": "#variabledelimiter"},
								{"include": "#subnamepartial"},
								{"include": "#comment"},
								{"include": "#invalid-illegalcharacters"}	
							]
						},
						{"include": "#spacedelimiter"}
					]
				}
			}
		},
		"mq2slashcommand-mac": {
			"match": "(?i)\\b(mac)\\b([^\\n\\r]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"begin": "(?i)(?<=\\/mac)\\s+",
							"end": "(?<=[\\S])(?=\\s)",
							"patterns": [
								{"include": "#constantdecimal"},
								{"include": "#constantbool"},
								{"include": "#variabledelimiter"},
								{"include": "#subnamepartial"},
								{"include": "#comment"},
								{"include": "#invalid-illegalcharacters"}	
							]
						},
						{"include": "#spacedelimiter"}
					]
				}
			}
		},
		"mq2slashcommand-declare": {
			"match": "\\b((?i)declare)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"match": "(?i)(?<=\\\/declare)\\s+(([^\\s\\n\\r\\[\\|\\]]|(?<ib>\\$\\{(?:[^\\$\\}]|\\g<ib>)+\\}))+)((?<vb>\\[(?:[^\\[\\]]|\\g<vb>)+\\])?)?(\\s+(?!(local|global|outer))([[:alpha:]]+))?(\\s+(local|global|outer))?(\\s+(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-|=))?(((?<bb>\\$\\{(?:[^\\$\\}]|\\g<bb>)+\\})|[ \\S])+)|(\\!)?(true|false)|(null)|(=?)([_[:alpha:]][ '\\.:_\\-[:alnum:]]*)|(=?)(\"[_[:alpha:]][ '\\.:_\\-[:alnum:]]*\"))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?)?",
							"captures": { 
								"1": {"patterns": [{"include": "#variablelabel"},{"include": "#invalid-illegalcharacter"}]},
								"4": {"patterns": [{"include": "#sqbracketdelimiter"}]},
								"8": {"patterns": [
										{"include": "#type-reference"},
										{"include": "#type-immediate"},
										{"include": "#spacedelimiter"}
									]
								},
								"10": {"name": "keyword.control.alert.mq2macro" },
								"11": {"patterns": [{"include": "#spacedelimiter"}]}
							}
						},
						{"include": "#comment"},
						{"include": "#invalid-illegalcharacters"}	
					]
				}
			}
		},
		"mq2slashcommand-deletevar": {
			"match": "\\b((?i)deletevar)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"match": "(?i)(?<=\\\/deletevar)\\s+((\\*\\s+global)|(([^\\s\\n\\r\\[\\|\\]]|(?<ib>\\$\\{(?:[^\\$\\}]|\\g<ib>)+\\}))+))",
							"captures": { 
								"2": { "name": "keyword.control.alert.mq2macro" },
								"3": {"patterns": [{"include": "#variablelabel"},{"include": "#invalid-illegalcharacter"}]}
							}
						},
						{"include": "#comment"},
						{"include": "#invalid-illegalcharacters"}	
					]
				}
			}
		},
		"mq2slashcommand-ini": {
			"match": "(?i)\\b(ini)\\s+(\")([^\"\\n\\r]+)(\")\\s+(\")([^\"\\n\\r]+)(\")\\s+(\")([^\"\\n\\r]+)(\")\\s+(\")([^\"\\n\\r]+)(\")\\s*([^\\|\\n\\r]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "name": "punctuation.separator.fowardslash.mq2macro"},
				"3": {"patterns": [{"include": "#inidata"},{"include": "#invalid-illegalcharacter"}]},
				"4": { "name": "punctuation.separator.fowardslash.mq2macro"},
				"5": { "name": "punctuation.separator.fowardslash.mq2macro"},
				"6": {"patterns": [{"include": "#inidata"},{"include": "#invalid-illegalcharacter"}]},
				"7": { "name": "punctuation.separator.fowardslash.mq2macro"},
				"8": { "name": "punctuation.separator.fowardslash.mq2macro"},
				"9": {"patterns": [{"include": "#inidata"},{"include": "#invalid-illegalcharacter"}]},
				"10": { "name": "punctuation.separator.fowardslash.mq2macro"},
				"11": { "name": "punctuation.separator.fowardslash.mq2macro"},
				"12": {"patterns": [{"include": "#inidata"},{"include": "#invalid-illegalcharacter"}]},
				"13": { "name": "punctuation.separator.fowardslash.mq2macro"},
				"14": { "patterns": [
						{"include": "#comment"},
						{"include": "#invalid-illegalcharacters"}	
					]
				}
			}
		},
		"inidata": {
			"begin": "(?<=\")",
			"end": "(?=\")",
			"patterns": [
				{"include": "#variabledelimiter"},
				{"include": "#strings"},
				{"include": "#substringparam"},
				{"include": "#invalid-illegalcharacters"}
			]
		},
		"mq2slashcommand-varset": {
			"match": "\\b((?i)varset)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"match": "(?i)(?<=\\\/varset)\\s+(([^\\s\\n\\r\\[\\|\\]]|(?<ib>\\$\\{(?:[^\\$\\}]|\\g<ib>)+\\}))+)((?<vb>\\[(?:[^\\[\\]]|\\g<vb>)+\\])?)?(\\s+(((<<|>>|-))?(\\d*\\.?\\d+)(s|m)?|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-|=))?(((?<bb>\\$\\{(?:[^\\$\\}]|\\g<bb>)+\\})|[ \\S])+)|(\\!)?(true|false)|(null)|(=?)([_[:alpha:]][ '\\.:_\\-[:alnum:]]*)|(=?)(\"[_[:alpha:]][ '\\.:_\\-[:alnum:]]*\"))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?)",
							"captures": { 
								"1": {"patterns": [{"include": "#variablelabel"},{"include": "#invalid-illegalcharacter"}]},
								"4": {"patterns": [{"include": "#sqbracketdelimiter"},{"include": "#invalid-illegalcharacter"}]},
								"6": {"patterns": [{"include": "#spacedelimiter"},{"include": "#invalid-illegalcharacter"}]}
							}
						},
						{"include": "#comment"},
						{"include": "#invalid-illegalcharacters"}	
					]
				}
			}
		},
		"mq2slashcommand-vardata": {
			"match": "\\b((?i)vardata)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"match": "(?i)(?<=\\\/vardata)\\s+((?:[^\\s\\n\\r\\[\\|\\]]|(?<ib>\\$\\{(?:[^\\$\\}]|\\g<ib>)+\\}))+)((?<vb>\\[(?:[^\\[\\]]|\\g<vb>)+\\])?)?\\s+((?:(?<eib>\\$\\{(?:[^\\$\\}]|\\g<eib>)+\\})|(?<evb>\\[(?:[^\\[\\]]|\\g<evb>)+\\])|[^\\s|])+)",
							"captures": { 
								"1": {"patterns": [{"include": "#variablelabel"},{"include": "#invalid-illegalcharacter"}]},
								"3": {"patterns": [{"include": "#sqbracketdelimiter"},{"include": "#invalid-illegalcharacter"}]},
								"5": {"patterns": [{"include": "#variable"},{"include": "#invalid-illegalcharacter"}]}
							}
						},
						{"include": "#comment"},
						{"include": "#invalid-illegalcharacters"}	
					]
				}
			}
		},
		"mq2slashcommand-varcalc": {
			"match": "\\b((?i)varcalc)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"match": "(?i)(?<=\\\/varcalc)\\s+(([^\\s\\n\\r\\[\\|\\]]|(?<ib>\\$\\{(?:[^\\$\\}]|\\g<ib>)+\\}))+)((?<vb>\\[(?:[^\\[\\]]|\\g<vb>)+\\])?)?\\s+([^|]*)",
							"captures": { 
								"1": {"patterns": [{"include": "#variablelabel"},{"include": "#invalid-illegalcharacter"}]},
								"4": {"patterns": [{"include": "#sqbracketdelimiter"},{"include": "#invalid-illegalcharacter"}]},
								"6": {"patterns": [{"include": "#formula"},{"include": "#invalid-illegalcharacter"}]}
							}
						},
						{"include": "#comment"},
						{"include": "#invalid-illegalcharacters"}	
					]
				}
			}
		},
		"mq2slashcommand-doevents": {
			"begin": "\\b((?i)doevents)\\b\\s*(\\b[_[:alpha:]][_[:alnum:]]*\\b)?\\s*",
			"captures": {
				"1": { "name": "keyword.control.doevents.mq2macro" },
				"2": { "patterns": [
					{ "include": "#constant-chat" },
					{
						"match": "\\b(flush)\\b",
						"captures": {
							"0": { "name": "keyword.control.doevents.flush.mq2macro" }
						}
					},
					{
						"match": "\\b([_[:alpha:]][_[:alnum:]]*)\\b",
						"captures": {
							"0": { "name": "entity.name.variable.preprocessor.symbol.mq2macro" }
						}
					}
				]}
			},
			"end": "(?=$)",
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"mq2slashcommand-delay": {
			"match": "(?i)(delay)\\s+(([0-9]+)|((?<bb>\\$\\{(?:[^\\$\\}]|\\g<bb>)+\\})))(m|s)?(\\s+[^|]*)?",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"3": { "name": "constant.numeric.mq2macro"},
				"4": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"6": { "name": "keyword.control.alert.mq2macro" },
				"7": {"patterns": [{"include": "#formula"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"mq2slashcommand-echo": {
			"begin": "(?i)(echo|mqlog|popup)\\b",
			"beginCaptures": {"1": { "name": "keyword.control.alert.mq2macro" }},
			"end": "(?<=$)",
			"patterns": [
				{ "include": "#variabledelimiter"},
				{ "include": "#echosubstring"}
			]
		},
		"mq2slashcommand-mqlogclear": {
			"match": "(?i)(mqlog\\s+clear)\\b",
			"captures": {"1": { "name": "keyword.control.alert.mq2macro" }}
		},
		"mq2slashcommand-if": {
			"patterns": [
				{
					"match": "(?i)(if)\\s+((?<vb>\\((?:[^\\(\\)]|\\g<vb>)+\\)))\\s*",
					"captures": {
						"1": { "name": "keyword.control.alert.mq2macro" },
						"2": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]}
					}
				}	
			]
		},
		"mq2slashcommand-elseif": {
			"match": "(?i)(?<=})\\s+(else)(?=\\s+\\/if\\s+\\()",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" }
			}
		},
		"mq2slashcommand-ifblock": {
			"begin": "(?i)\\s*(((?<=}) (else) )|((?<=}) (else) )?((\\\/)(if|while)\\s+((?<vb>\\((?:[^\\(\\)]|\\g<vb>)+\\))) ))({)",
			"beginCaptures": {
				"3": { "name": "keyword.control.alert.mq2macro" },
				"5": { "name": "keyword.control.alert.mq2macro" },
				"7": { "name": "punctuation.parenthesis.open.mq2macro" },
				"8": { "name": "keyword.control.alert.mq2macro" },
				"9": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]},
				"11": { "name": "punctuation.parenthesis.open.mq2macro" }
			},
			"end": "\\s*}",
			"endCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"patterns": [
				{"include": "#subbody"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"mq2slashcommand-forblock": {
			"begin": "(?i)\\s*(\\\/)(for)\\s+([^\\s\\n\\r\\[\\|\\]]+)((?<vb>\\[(?:[^\\[\\]]|\\g<vb>)+\\]))?\\s+(([0-9]+)|((?<bb>\\$\\{(?:[^\\$\\}]|\\g<bb>)+\\})))\\s+((down)?to)\\s+(([0-9]+)|((?<gb>\\$\\{(?:[^\\$\\}]|\\g<gb>)+\\})))(\\s+(step)\\s+(([0-9]+)|((?<xb>\\$\\{(?:[^\\$\\}]|\\g<xb>)+\\}))))?",
			"beginCaptures": {
				"1": { "name": "punctuation.parenthesis.open.mq2macro" },
				"2": { "name": "keyword.control.for.mq2macro" },
				"3": {"name": "entity.name.variable.parameter.mq2macro"},
				"4": {"patterns": [{"include": "#sqbracketdelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"7": { "name": "constant.numeric.mq2macro"},
				"8": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"10": { "name": "keyword.control.for.mq2macro" },
				"13": { "name": "constant.numeric.mq2macro"},
				"14": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"17": { "name": "keyword.control.for.mq2macro" },
				"19": { "name": "constant.numeric.mq2macro"},
				"20": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]}
			},
			"end": "(?i)\\s*(\\\/)(next)\\s+([^\\s\\n\\r\\[\\|\\]]+)((?<vb>\\[(?:[^\\[\\]]|\\g<vb>)+\\]))?",
			"endCaptures": {
				"1": { "name": "punctuation.parenthesis.open.mq2macro" },
				"2": { "name": "keyword.control.next.mq2macro" },
				"3": {"name": "entity.name.variable.parameter.mq2macro"},
				"4": {"patterns": [{"include": "#sqbracketdelimiter"},{"include": "#invalid-illegalcharacter"}]}
			},
			"patterns": [
				{"include": "#subbody"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"mq2slashcommand-goto": {
			"match": "(?i)(goto)\\s+(:)([^\\s\\n\\r\\[\\|\\]]+)\\s*([^\\n\\r]*)\\s*(?=$)",
			"captures": {
				"1": { "name": "keyword.control.next.mq2macro" },
				"2": { "name": "punctuation.colon.mq2macro" },
				"3": { "name": "markup.heading.mq2macro"},
				"4": {"patterns": [
					{"include": "#comment"},
					{"include": "#invalid-illegalcharacters"}						
				]}
			}
		},
		"mq2slashcommand-keypress": {
			"match": "(?i)\\b(keypress)\\s+(?:(([^\\s\\+\\$]+(?!\\$))|(((?<db>\\$\\{(?:[^\\$\\}]|\\g<db>)*\\}))|([^\\s\\+\\$]))+)(\\+))?(?:(([^\\s\\+\\$]+(?!\\$))|(((?<ab>\\$\\{(?:[^\\$\\}]|\\g<ab>)*\\}))|([^\\s\\+\\$]))+)(\\+))?(?:(([^\\s\\+\\$]+(?!\\$))|(((?<bb>\\$\\{(?:[^\\$\\}]|\\g<bb>)*\\}))|([^\\s\\+\\$]))+)(\\+))?(([^\\s\\+\\$]+(?!\\$))|(((?<rb>\\$\\{(?:[^\\$\\}]|\\g<rb>)*\\}))|([^\\s\\+\\$]))+)(\\s+\\bhold\\b)?([ \\t][^\\n\\r]*)?(?=$)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": {"name": "string.unquoted.mq2macro"},
				"3": {"patterns": [{"include": "#keybindmodifiers"},{"include": "#invalid-illegalcharacter"}]},
				"5": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"8": { "name": "punctuation.plus.mq2macro" },
				"9": {"name": "string.unquoted.mq2macro"},
				"10": {"patterns": [{"include": "#keybindmodifiers"},{"include": "#invalid-illegalcharacter"}]},
				"12": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"15": { "name": "punctuation.plus.mq2macro" },
				"16": {"name": "string.unquoted.mq2macro"},
				"17": {"patterns": [{"include": "#keybindmodifiers"},{"include": "#invalid-illegalcharacter"}]},
				"19": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"22": { "name": "punctuation.plus.mq2macro" },
				"23": {"name": "string.unquoted.mq2macro"},
				"24": {"patterns": [{"include": "#eqkeybinds"},{"include": "#keybinds"},{"include": "#invalid-illegalcharacter"}]},
				"26": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"29": { "name": "keyword.control.alert.mq2macro" },
				"30": { "patterns": [
					{"include": "#comment"},
					{"include": "#invalid-illegalcharacters"}						
					]
				}
			}
		},
		"formula-par": {
			"begin": "\\s*\\(",
			"beginCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"end": "\\s*\\)",
			"endCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"patterns": [
				{"include": "#formula"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"formula": {
			"patterns": [
				{"include": "#formula-compare"},
				{"include": "#formula-end"},
				{"include": "#formula-join"},
				{"include": "#formula-operand"},
				{"include": "#formula-par"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"formula-right": {
			"patterns": [
				{"include": "#formula-end"},
				{"include": "#formula-join-right"},
				{"include": "#formula-operand-right"},
				{"include": "#formula-par"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"formula-join": {
			"match": "(?i)\\s*(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-))?((?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\}))|(\\!)?(true|false)|(null))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?\\s*(\\|\\||&&)\\s*(?=([^\\(\\s\\)])+|\\()",
			"captures":
			{
				"3": {"name": "keyword.operator.mq2macro"},
				"4": {"patterns": [{"include": "#constantdecimal"},{"include": "#invalid-illegalcharacter"}]},
				"6": {"name": "keyword.operator.mq2macro"},
				"7": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]},
				"10": {"name": "keyword.operator.mq2macro"},
				"11": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"13": {"name": "keyword.operator.mq2macro"},
				"14": {"patterns": [{"include": "#constantbool"},{"include": "#invalid-illegalcharacter"}]},
				"15": {"name": "constant.language.truefalse.mq2macro"},
				"17": {"name": "punctuation.separator.plusminus.mq2macro"},
				"18": {"name": "support.type.immediate.mq2macro" },
				"19": {"name": "punctuation.separator.plusminus.mq2macro"},
				"20": {"name": "keyword.operator.mq2macro"}
			}
		},
		"formula-end": {
			"match": "(?i)\\s*(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-))?((?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\}))|(\\!)?(true|false)|(null))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?\\s*((?=[\\)])|(?=[\\]])|(?=$))",
			"captures":
			{
				"3": {"name": "keyword.operator.mq2macro"},
				"4": {"patterns": [{"include": "#constantdecimal"},{"include": "#invalid-illegalcharacter"}]},
				"6": {"name": "keyword.operator.mq2macro"},
				"7": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]},
				"10": {"name": "keyword.operator.mq2macro"},
				"11": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"13": {"name": "keyword.operator.mq2macro"},
				"14": {"patterns": [{"include": "#constantbool"},{"include": "#invalid-illegalcharacter"}]},
				"15": {"name": "constant.language.truefalse.mq2macro"},
				"17": {"name": "punctuation.separator.plusminus.mq2macro"},
				"18": {"name": "support.type.immediate.mq2macro" },
				"19": {"name": "punctuation.separator.plusminus.mq2macro"}

			}
		},
		"formula-operand": {
			"match": "(?i)\\s*(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-))?((?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\}))|(\\!)?(true|false)|(null))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?\\s*(\\+|-|\\\\|\\\/|\\*|%|\\^|&(?!&)|\\|(?!\\|)|~|\\^\\^)\\s*(?=([^\\(\\s\\)])+|\\()",
			"captures":
			{
				"3": {"name": "keyword.operator.mq2macro"},
				"4": {"patterns": [{"include": "#constantdecimal"},{"include": "#invalid-illegalcharacter"}]},
				"6": {"name": "keyword.operator.mq2macro"},
				"7": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]},
				"10": {"name": "keyword.operator.mq2macro"},
				"11": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"13": {"name": "keyword.operator.mq2macro"},
				"14": {"patterns": [{"include": "#constantbool"},{"include": "#invalid-illegalcharacter"}]},
				"15": {"name": "constant.language.truefalse.mq2macro"},
				"17": {"name": "punctuation.separator.plusminus.mq2macro"},
				"18": {"name": "support.type.immediate.mq2macro" },
				"19": {"name": "punctuation.separator.plusminus.mq2macro"},
				"20": {"name": "keyword.operator.mq2macro"}
			}
		},
		"formula-operand-right": {
			"match": "(?i)\\s*(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-))?((?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\}))|(\\!)?(true|false)|(null))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?\\s*(\\+|-|\\\\|\\\/|\\*|%|\\^|&(?![&])|\\|(?![\\|])|~|\\^\\^)\\s*(([^\\(\\)]|((?<hb>\\((?:[^\\(\\)]|\\g<hb>)+\\))))+)",
			"captures":
			{
				"3": {"name": "keyword.operator.mq2macro"},
				"4": {"patterns": [{"include": "#constantdecimal"},{"include": "#invalid-illegalcharacter"}]},
				"6": {"name": "keyword.operator.mq2macro"},
				"7": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]},
				"10": {"name": "keyword.operator.mq2macro"},
				"11": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"13": {"name": "keyword.operator.mq2macro"},
				"14": {"patterns": [{"include": "#constantbool"},{"include": "#invalid-illegalcharacter"}]},
				"15": {"name": "constant.language.truefalse.mq2macro"},
				"17": {"name": "punctuation.separator.plusminus.mq2macro"},
				"18": {"name": "support.type.immediate.mq2macro" },
				"19": {"name": "punctuation.separator.plusminus.mq2macro"},
				"20": {"name": "keyword.operator.mq2macro"},
				"21": {"patterns": [{"include": "#formula-right"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"formula-join-right": {
			"match": "(?i)\\s*(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-))?((?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\}))|(\\!)?(true|false)|(null))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?\\s*(&&|\\|\\|)\\s*(([^\\(\\)]|((?<hb>\\((?:[^\\(\\)]|\\g<hb>)+\\))))+)",
			"captures":
			{
				"3": {"name": "keyword.operator.mq2macro"},
				"4": {"patterns": [{"include": "#constantdecimal"},{"include": "#invalid-illegalcharacter"}]},
				"6": {"name": "keyword.operator.mq2macro"},
				"7": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]},
				"10": {"name": "keyword.operator.mq2macro"},
				"11": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"13": {"name": "keyword.operator.mq2macro"},
				"14": {"patterns": [{"include": "#constantbool"},{"include": "#invalid-illegalcharacter"}]},
				"15": {"name": "constant.language.truefalse.mq2macro"},
				"17": {"name": "punctuation.separator.plusminus.mq2macro"},
				"18": {"name": "support.type.immediate.mq2macro" },
				"19": {"name": "punctuation.separator.plusminus.mq2macro"},
				"20": {"name": "keyword.operator.mq2macro"},
				"21": {"patterns": [{"include": "#formula"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"formula-compare": {
			"match": "(?i)\\s*(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-))?((?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\}))|(\\!)?(true|false)|(null))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?\\s*(>=|<=|<|>|==|!=)\\s*(([^\\(\\)]|((?<hb>\\((?:[^\\(\\)]|\\g<hb>)+\\))))+)",
			"captures":
			{
				"3": {"name": "keyword.operator.mq2macro"},
				"4": {"patterns": [{"include": "#constantdecimal"},{"include": "#invalid-illegalcharacter"}]},
				"6": {"name": "keyword.operator.mq2macro"},
				"7": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]},
				"10": {"name": "keyword.operator.mq2macro"},
				"11": {"patterns": [{"include": "#variabledelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"13": {"name": "keyword.operator.mq2macro"},
				"14": {"patterns": [{"include": "#constantbool"},{"include": "#invalid-illegalcharacter"}]},
				"15": {"name": "constant.language.truefalse.mq2macro"},
				"17": {"name": "punctuation.separator.plusminus.mq2macro"},
				"18": {"name": "support.type.immediate.mq2macro" },
				"19": {"name": "punctuation.separator.plusminus.mq2macro"},
				"20": {"name": "keyword.operator.mq2macro"},
				"21": {"patterns": [{"include": "#formula-right"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"ifformula-varleftside": {
			"match": "(?i)\\s*(\\!)?((?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\})?)\\s*(>=|<=|<|>|==|!=)\\s*([^\\n\\r\\(])*",
			"captures": {
				"4": {"patterns": [{"include": "#mq2slashcommand"}]}

			}
		},
		"ifformula-boolcompare": {
			"match": "(?i)(?<=[\\&\\|\\(])\\s*((\\!)?((?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\})?)|true|false)(\\s*(==|!=)\\s*((\\!)?((?<gvb>\\$\\{(?:[^\\$\\}]|\\g<gvb>)+\\})?)|true|false))?\\s*(\\&\\&|\\|\\||(?=\\)))",
			"captures": {"0": {
			"patterns": [
				{"include": "#variabledelimiter"},
				{"include": "#constantbool"},
				{"include": "#operators"},
				{"include": "#invalid-illegalcharacter"}
			]}}
		},
		"mq2slashcommand-returnold": {
			"begin": "\\b((?i)return)\\b\\s*(\\b[[:alnum:]]+\\b|\\b[_[:alpha:]][_[:alnum:]]*\\b)?\\s*",
			"beginCaptures": {
				"1": { "name": "keyword.control.return.mq2macro" },
				"2": { "patterns": [
					{
						"match": "\\b([0-9]+|[0-9]*\\.[0-9]+)\\b",
						"captures": {
							"0": { "name": "constant.numeric.decimal.mq2macro" }
						}
					},
					{
						"match": "\\b([_[:alpha:]][_[:alnum:]]*)\\b",
						"captures": {
							"0": { "name": "string.unquoted.mq2macro" }
						}
					}
				]}
			},
			"end": "(?=$)",
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#invalid-illegalcharacters" }
			]
		},
		"mq2slashcommand-return": {
			"match": "\\b((?i)return)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "patterns": [
						{
							"match": "(?i)(?<=\\\/return)(\\s+(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-|=))?(((?<bb>\\$\\{(?:[^\\$\\}]|\\g<bb>)+\\})|[ '\\.:_\\-[:alnum:]])+)|(\\!)?(true|false)|(null)|(=?)([_[:alpha:]][ '\\.:_\\-[:alnum:]]*)|(=?)(\"[_[:alpha:]][ '\\.:_\\-[:alnum:]]*\"))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?)",
							"captures": { 
								"1": {"patterns": [{"include": "#spacedelimiter"},{"include": "#invalid-illegalcharacter"}]}
							}
						},
						{"include": "#comment"},
						{"include": "#invalid-illegalcharacters"}	
					]
				}
			}
		},
		"mq2slashcommand-unsupported": {
			"match": "(?i)\\b(stick)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "support.function.alert.mq2macro" },
				"2": {"patterns": [{"include": "#spacedelimiter"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"mq2eqbc-slashcommand-unsupported": {
			"match": "(?i)\\b(bc|bct|bca|bcaa)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "support.function.alert.mq2macro" },
				"2": {"patterns": [{"include": "#spacedelimiter"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"mq2cast-slashcommand-unsupported": {
			"match": "(?i)\\b(casting|memorize|mem)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "support.function.alert.mq2macro" },
				"2": {"patterns": [{"include": "#spacedelimiter"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"eqslashcommand-unsupported": {
			"match": "(?i)\\b(adriver|afk|alt|alternateadv|anon|assist|auction|autoinv|autoinventory|autosplit|betabuff|Baz|book|bug|camp|cast|channel|charinfo|chatfontsize|claim|consent|clearchat|clearhits|consider|combatmusic|corpsedrag|corpsedrop|corpse|clearmarks|decline|deny|deletepetition|disband|discipline|dismount|doability|dopropertinting|duck|dual|dynamiclights|emote|facepick|exit|fastdrop|feedback|filter|find|findpc|follow|fontface|gmarknpc|friend|gsay|gems|guidehelp|guilddelete|guildinvite|getguildmotd|guildpeace|guildleader|guildremove|g|gu|guildsay|guildstatus|guildwar|hail|help|hidec|hidecorpse|ignore|hotbutton|inspect|inspectbuffs|indicator|invite|keys|invwinlabels|language|lfg|log|loadskin|loc|loot|makeleader|lootnodrop|mcicontrol|memspellset|marknpc|mixahead|mousespeed|msg|mp3|movelog|motd|note|open|outputfile|ooc|particledensity|pet|pause|petition|played|quit|random|reply|report|resetwindows|reverb|reversesound|roleplay|rmarknpc|rtarget|rewind|say|sdriver|serverfilter|shadow|shield|shout|showgrass|shownames|shownpcnames|showspelleffects|stand|stoptracking|stopcast|stopsong|sit|split|surname|tell|target|time|toggleinspect|trackfilter|tracksort|targetgroupbuff|trackplayers|trader|testbuffme|ttell|usecolor|viewport|vgroup|viewpetition|vrdelay|vplay|vraid|vtell|who|whotarget|wincolor|yell)\\b([^\\n\\r\\|]*)",
			"captures": {
				"1": { "name": "support.function.alert.mq2macro" },
				"2": {"patterns": [{"include": "#spacedelimiter"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"mq2slashcommand-singles": {
			"match": "(?i)\\b(banklist|beep|break|charinfo|cleanup|cleanerrors|continue|defaulthud|destroy|drop|endmac|endmacro|identify|location|loginname|setautorun|unload|updateitems)\\b",
			"captures": {
				"1": { "name": "keyword.control.squelch.mq2macro" }
			}
		},
		"mq2slashcommand-windowstate": {
			"match": "(?i)\\b(windowstate)\\s+(inventory|merchant|corpse|spellbook|map|notes)(\\s+(open|close)\\b)?([^\\n\\r]*)",
			"captures": {
				"1": { "name": "keyword.control.alert.mq2macro" },
				"2": { "name": "support.type.immediate.mq2macro" },
				"4": { "name": "keyword.control.alert.mq2macro" },
				"5": { "patterns": [
					{"include": "#comment"},
					{"include": "#invalid-illegalcharacters"}						
					]
				}
			}
		},
		"parenthesized-parameter-list": {
			"begin": "(\\()",
			"beginCaptures": {
				"0": {
					"name": "punctuation.parenthesis.open.mq2macro"
				}
			},
			"end": "(\\))",
			"endCaptures": {
				"0": {
					"name": "punctuation.parenthesis.close.mq2macro"
				}
			},
			"patterns": [
				{ "include": "#parameter" },
				{ "include": "#parameterwithtype" },
				{ "include": "#punctuation-comma" }
			]
		},
		"parameter": {
			"match":"(?<=[\\(,])\\s*\\b([_[:alpha:]][_[:alnum:]]*)\\b\\s*(?=[\\),])",
			"captures": {
				"1": {"name": "entity.name.variable.parameter.mq2macro" }
			}
		},
		"parameterwithtype": {
			"match":"(?<=[\\(,])\\s*\\b([[:alpha:]]+)\\b\\s*\\b([_[:alpha:]][_[:alnum:]]*)\\b\\s*(?=[\\),])",
			"captures": {
				"1": {
					"patterns": [
						{ "include": "#type-immediate" },
						{ "include": "#type-reference" },
						{ "include": "#invalid-illegalcharacters" }
					]
				},
				"2": {"name": "entity.name.variable.parameter.mq2macro" }
			}
		},
		"type-immediate": {
			"match": "\\b(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)\\b",
			"captures": {
				"1": { "name": "support.type.immediate.mq2macro" }
			}
		},
		"toplevelobjectvariable": {
			"match": "(?<=[\\{ ])\\s*\\b(AltAbility|Bool|Me|Corpse|Cursor|Defined|Ground|FindItem|FindItemBank|FindItemBankCount|FindItemCount|Float|GameTime|Group|GroupLeader|GroupLeaderName|Heading|If|Ini|Int|InvSlot|LastSpawn|LineOfSight|Macro|MacroQuest|Math|Merchant|NamingSpawn|NearestSpawn|Plugin|Raid|SelectedItem|Skill|Spawn|SpawnCount|Spell|String|Switch|Target|Time|Type|Window|Zone)\\b(?!\\$)",
			"captures": {
				"1": { "name": "variable.language.mq2macro" }
			}
		},
		"type-reference": {
			"match": "\\b(altability|array|buff|character|ground|item|plugin|skill|spawn|spell|string|switch|time|timer|type|window|zone)\\b",
			"captures": {
				"1": {
					"name": "support.class.reference.mq2macro"
				}
			}
		},
		"constant-chat": {
			"match": "\\b((auc|chat|guild|group|ooc|say|shout|tell))\\b",
			"captures": {
				"1": { "name": "entity.name.type.mq2macro" }
			}
		},
		"variabledelimiterold": {
			"match": "(!?)((?<vb>(\\${)((?:[^\\$}]|\\g<vb>)+)(})))",
			"captures": {
				"1": {"name": "keyword.operator.bang.mq2macro"},
				"4": {"name": "punctuation.separator.variable.mq2macro"},
				"5": {
					"patterns": [
						{"include": "#variable"},
						{"include": "#invalid-illegalcharacters"}
					]
				},
				"6": {"name": "punctuation.separator.variable.mq2macro"}
			}
		},
		"variabledelimiter": {
			"begin": "\\s*\\${",
			"beginCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"end": "\\s*}",
			"endCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"patterns": [
				{"include": "#variable"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"spacedelimiter": {
			"begin": "\\s+",
			"end": "(?<=[\\S])(?=\\s)",
			"patterns": [
				{"include": "#variabledelimiter"},
				{"include": "#strings"},
				{"include": "#constantbool"},
				{"include": "#constantdecimal"},
				{"include": "#substringparam"},
				{"include": "#comment"},
				{"include": "#invalid-illegalcharacters"}
			]
		},
		"variable":
		{
			"patterns": [
				{ "include": "#variable-mathcalc" },
				{ "include": "#variable-default" }
			]
		},
		"variablelabel":
		{
			"patterns": [
				{ "include": "#variabledelimiter"},
				{"include": "#toplevelobjectvariable"},
				{
					"match": "[_[:alpha:]][_[:alnum:]]*", 
					"captures": {"0": {"name": "entity.name.variable.parameter.mq2macro"}}
				},
				{"include": "#invalid-illegalcharacters"}
			]
		},
		"variable-default":
		{
			"match":"((((?<db>\\$\\{(?:[^\\$\\}]|\\g<db>)*\\}))|([_[:alpha:]][_[:alnum:]]*))+)((?<sb>\\[(?:[^\\[\\]]|\\g<sb>)*\\]))?((\\.)|(?=})|(?=$))",
			"captures": {
				"1": {"patterns": [{ "include": "#variablelabel"}] },
				"6": {"patterns": [{"include": "#sqbracketdelimiter"},{"include": "#invalid-illegalcharacter"}]},
				"9": {"name": "punctuation.separator.plusminus.mq2macro"}
			}		
		},
		"variable-mathcalc":
		{
			"match":"(?<=\\${)((Math)(\\.)(Calc))((?<sb>\\[(?:[^\\[\\]]|\\g<sb>)*\\]))?((\\.)|(?=}))",
			"captures": {
				"2": {"name": "variable.language.mq2macro"},
				"3": {"name": "punctuation.separator.plusminus.mq2macro"},
				"4": {"name": "support.function.mq2macro"},
				"5": {"patterns": [{"include": "#sqbracketformuladelimiter"},{"include": "#invalid-illegalcharacter"}]}
			}
		},
		"variableold": {
			"match": "(?<!\\])([_[:alpha:]][_[:alnum:]]*)((\\.)|((?<sb>\\s*\\[(?:[^\\[\\]]|\\g<sb>)*\\]\\s*))(\\.)?)?(.*)",
			"captures": {
				"1": {
					"patterns": [
						{"include": "#toplevelobjectvariable"},
						{
							"match": "[_[:alpha:]][_[:alnum:]]*", 
							"captures": {"0": {"name": "entity.name.variable.parameter.mq2macro"}}
						},
						{"include": "#invalid-illegalcharacters"}
					]
				},
				"3": {"name": "punctuation.separator.variable.mq2macro"},
				"4": {
					"patterns": [
						{"include": "#sqbracketdelimiter"},
						{"include": "#invalid-illegalcharacters"}
					]
				},
				"6": {"name": "punctuation.separator.variable.mq2macro"},
				"7": {
					"patterns": [
						{"include": "#variable"},
						{"include": "#invalid-illegalcharacters"}
					]
				}
			}
		},
		"constantdecimal": {
			"match": "(?<![[:alpha:]])(([+-])?((\\d*)(\\.)?)(\\d+))(s|m)?((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?(?![[:alpha:]])",
			"captures": {
				"2": {"name": "punctuation.separator.plusminus.mq2macro"},
				"4": {"name": "constant.numeric.mq2macro"},
				"5": {"name": "punctuation.separator.plusminus.mq2macro"},
				"6": {"name": "constant.numeric.mq2macro"},
				"7": {"name": "keyword.control.next.mq2macro"},
				"9": {"name": "punctuation.separator.plusminus.mq2macro"},
				"10": {"name": "support.type.immediate.mq2macro" },
				"11": {"name": "punctuation.separator.plusminus.mq2macro"}
			}
		},
		"constantbool": {
			"match": "(?i)(?<![[:alnum:]])(true|false)(?![[:alnum:]])",
			"captures": {
				"1": {"name": "constant.language.truefalse.mq2macro"}
			}
		},
		"searchstring": {
			"match": "([=]?)\\b([_[:alnum:]]+)\\b",
			"captures": {
				"1": {"name": "punctuation.separator.equal.mq2macro"},
				"2": {"name": "string.unquoted.mq2macro"}
			}
		},		
		"substringparam": {
			"match": "[^\\s\\$\\|\"]+",
			"captures": { "0": {"name": "string.unquoted.mq2macro"}}
		},
		"operators": {
			"match": "((\\+|-|\\\/|\\\\|\\*|%|\\^|&|\\||~|\\^\\^|<<|>>|==|!=|>|<|>=|<=|&&|\\|\\||!))",
			"captures": { "0": {"name": "keyword.operator.mq2macro"}}
		},
		"keybinds": {
			"match": "(?i)((esc|f1|f2|f3|f4|f5|f6|f7|f8|f9|f10|f11|f12|Prnt_Scrn|Scroll_Lock|`|-|=|Backspace|Insert|Home|Page_Up|Delete|End|Page_Down|Up|Down|Left|Right|Tab|Caps_Lock|Space|Num_[0-9]|Num_Lock|Num_Slash|Num_Asterick|Num_Minus|Num_Plus|Num_Enter|Num_Del|\\[|\\]|\\\\|;|'|,|\\.|\\\/|[0-9]|[a-z])\\b)",
			"captures": { "0": {"name": "constant.language.mq2macro"}}
		},
		"keybindmodifiers": {
			"match": "(?i)(\\b(shift|alt|ctrl|right_alt|right_ctrl|right_shift))",
			"captures": { "0": {"name": "constant.language.mq2macro"}}
		},
		"eqkeybinds": {
			"match": "(?i)(\\b(AUTORUN|JUMP|FORWARD|BACK|RIGHT|LEFT|STRAFE_LEFT|STRAFE_RIGHT|MOUSELOOK|MOUSELOOK_ENGAGE|AUTOPRIM|CONSIDER|DUCK|HAIL|INVENTORY|TELL|USE|PITCHUP|PITCHDOWN|CENTERVIEW|ZOOMIN|ZOOMOUT|TOGGLECAM|FULLSCREEN|TARGETME|PARTY1|PARTY2|PARTY3|PARTY4|PARTY5|TARGETPC|CYCLEPCTARGETS|TARGETNPC|CYCLENPCTARGETS|TARGETCORPSE|CYCLECORPSETARGETS|NETSTAT|HOT1_1|HOT1_2|HOT1_3|HOT1_4|HOT1_5|HOT1_6|HOT1_7|HOT1_8|HOT1_9|HOT1_10|HOT1_11|HOT1_12|HOT2_1|HOT2_2|HOT2_3|HOT2_4|HOT2_5|HOT2_6|HOT2_7|HOT2_8|HOT2_9|HOT2_10|HOT2_11|HOT2_12|HOT3_1|HOT3_2|HOT3_3|HOT3_4|HOT3_5|HOT3_6|HOT3_7|HOT3_8|HOT3_9|HOT3_10|HOT3_11|HOT3_12|HOT4_1|HOT4_2|HOT4_3|HOT4_4|HOT4_5|HOT4_6|HOT4_7|HOT4_8|HOT4_9|HOT4_10|HOT4_11|HOT4_12|HOT5_1|HOT5_2|HOT5_3|HOT5_4|HOT5_5|HOT5_6|HOT5_7|HOT5_8|HOT5_9|HOT5_10|HOT5_11|HOT5_12|HOT6_1|HOT6_2|HOT6_3|HOT6_4|HOT6_5|HOT6_6|HOT6_7|HOT6_8|HOT6_9|HOT6_10|HOT6_11|HOT6_12|HOT7_1|HOT7_2|HOT7_3|HOT7_4|HOT7_5|HOT7_6|HOT7_7|HOT7_8|HOT7_9|HOT7_10|HOT7_11|HOT7_12|HOT8_1|HOT8_2|HOT8_3|HOT8_4|HOT8_5|HOT8_6|HOT8_7|HOT8_8|HOT8_9|HOT8_10|HOT8_11|HOT8_12|HOT9_1|HOT9_2|HOT9_3|HOT9_4|HOT9_5|HOT9_6|HOT9_7|HOT9_8|HOT9_9|HOT9_10|HOT9_11|HOT9_12|HOT10_1|HOT10_2|HOT10_3|HOT10_4|HOT10_5|HOT10_6|HOT10_7|HOT10_8|HOT10_9|HOT10_10|HOT10_11|HOT10_12|HOTPAGE1_1|HOTPAGE1_2|HOTPAGE1_3|HOTPAGE1_4|HOTPAGE1_5|HOTPAGE1_6|HOTPAGE1_7|HOTPAGE1_8|HOTPAGE1_9|HOTPAGE1_10|HOTPAGE2_1|HOTPAGE2_2|HOTPAGE2_3|HOTPAGE2_4|HOTPAGE2_5|HOTPAGE2_6|HOTPAGE2_7|HOTPAGE2_8|HOTPAGE2_9|HOTPAGE2_10|HOTPAGE3_1|HOTPAGE3_2|HOTPAGE3_3|HOTPAGE3_4|HOTPAGE3_5|HOTPAGE3_6|HOTPAGE3_7|HOTPAGE3_8|HOTPAGE3_9|HOTPAGE3_10|HOTPAGE4_1|HOTPAGE4_2|HOTPAGE4_3|HOTPAGE4_4|HOTPAGE4_5|HOTPAGE4_6|HOTPAGE4_7|HOTPAGE4_8|HOTPAGE4_9|HOTPAGE4_10|HOTPAGE5_1|HOTPAGE5_2|HOTPAGE5_3|HOTPAGE5_4|HOTPAGE5_5|HOTPAGE5_6|HOTPAGE5_7|HOTPAGE5_8|HOTPAGE5_9|HOTPAGE5_10|HOTPAGE6_1|HOTPAGE6_2|HOTPAGE6_3|HOTPAGE6_4|HOTPAGE6_5|HOTPAGE6_6|HOTPAGE6_7|HOTPAGE6_8|HOTPAGE6_9|HOTPAGE6_10|HOTPAGE7_1|HOTPAGE7_2|HOTPAGE7_3|HOTPAGE7_4|HOTPAGE7_5|HOTPAGE7_6|HOTPAGE7_7|HOTPAGE7_8|HOTPAGE7_9|HOTPAGE7_10|HOTPAGE8_1|HOTPAGE8_2|HOTPAGE8_3|HOTPAGE8_4|HOTPAGE8_5|HOTPAGE8_6|HOTPAGE8_7|HOTPAGE8_8|HOTPAGE8_9|HOTPAGE8_10|HOTPAGE9_1|HOTPAGE9_2|HOTPAGE9_3|HOTPAGE9_4|HOTPAGE9_5|HOTPAGE9_6|HOTPAGE9_7|HOTPAGE9_8|HOTPAGE9_9|HOTPAGE9_10|HOTPAGE10_1|HOTPAGE10_2|HOTPAGE10_3|HOTPAGE10_4|HOTPAGE10_5|HOTPAGE10_6|HOTPAGE10_7|HOTPAGE10_8|HOTPAGE10_9|HOTPAGE10_10|CAST1|CAST2|CAST3|CAST4|CAST5|CAST6|CAST7|CAST8|CAST9|CAST10|CAST11|CAST12|REPLY|CYCLEREPLY|CYCLEREPLY_BACK|BACKDROP|TOGGLETARGET|SPELLBOOK|ABILITIES|COMBAT|SOCIALS|MAIN|WHO|INVITE_FOLLOW|DISBAND|CAMP|SIT_STAND|RUN_WALK|CLIP_IN|CLIP_OUT|VOICE_ON|SCREENCAP|HISTORY_UP|HISTORY_DOWN|PAGEUP|PAGEDOWN|CMDMODE_SAY|CMDMODE_EMOTE|LOCK_WINDOWS|TOGGLE_PLAYERWIN|TOGGLE_PARTYWIN|TOGGLE_TARGETWIN|TOGGLE_SPELLSWIN|TOGGLE_BUFFWIN|TOGGLE_HOTBOX1WIN|TOGGLE_HOTBOX2WIN|TOGGLE_HOTBOX3WIN|TOGGLE_HOTBOX4WIN|TOGGLE_HOTBOX5WIN|TOGGLE_HOTBOX6WIN|TOGGLE_HOTBOX7WIN|TOGGLE_HOTBOX8WIN|TOGGLE_HOTBOX9WIN|TOGGLE_HOTBOX10WIN|TOGGLE_CHATWIN|TOGGLE_MAILWIN|TOGGLE_MAILCOMPWIN|TOGGLE_MAINMENUWIN|TOGGLE_ALTADVWIN|TOGGLE_BAZAARWIN|RTARGET|TOGGLE_FRIENDSWIN|TOGGLE_PETINFOWIN|TOGGLE_OPTIONSWIN|TOGGLE_HELPWIN|TOGGLE_SELECTORWIN|TOGGLE_VIDEOMODEWIN|TOGGLE_BAZAARSEARCHWIN|TOGGLE_COMPASSWIN|TOGGLE_RAIDWIN|TOGGLE_MUSICPLAYERWIN|FORWARD_CAM|BACK_CAM|RIGHT_CAM|LEFT_CAM|PITCHUP_CAM|PITCHDOWN_CAM|TOGGLE_JOURNAL|TOGGLE_SDBUFFWIN|RELEASE_MOUSE_CURSOR|TOGGLE_STORYWIN|TOGGLE_MAPWIN|TOGGLE_GUILDMGMTWIN|TOGGLE_FELLOWSHIPWIN|TOGGLE_LFGROUPWIN|TOGGLE_LFGUILDWIN|TOGGLETWOTARGETS|TOGGLE_CONTEXTMENUS|FIRST_PERSON_CAMERA|OVERHEAD_CAMERA|CHASE_CAMERA|USER1_CAMERA|USER2_CAMERA|TETHER_CAMERA|TOGGLE_ADVREQUESTWIN|CLOSE_TOP_WINDOW|CLEAR_TARGET|CMD_TOGGLE_FIND_WINDOW|TOGGLE_LEADERSHIPWIN|TOGGLE_TRIBUTEBENEFITWIN|CMD_OPENING_ATTACK1|CMD_OPENING_ATTACK2|CMD_OPENING_ATTACK3|CMD_OPENING_ATTACK4|CMD_OPENING_ATTACK5|CMD_OPENING_ATTACK6|CMD_OPENING_ATTACK7|CMD_OPENING_ATTACK8|CMD_TOGGLE_COMBAT_ABILITY_WIN|CMD_TOGGLE_DYNAMIC_ZONE_WIN|CMD_TOGGLE_PVP_LEADERBOARD|CMD_TOGGLETASKWIN|CMD_TOGGLE_TICKET_WND|CMD_STOP_CAST|CMD_TOGGLEVOICEWIN|CMD_TOGGLE_TITLE_WND|POTION_SLOT_1|POTION_SLOT_2|POTION_SLOT_3|POTION_SLOT_4|TOGGLE_POTION_BELT|TOGGLE_BANDOLIER|OPEN_INV_BAGS|CLOSE_INV_BAGS|TOGGLE_INV_BAGS|TOGGLE_SKILLS_WND|OPEN_ETN_HELP|CMD_TOGGLE_BLOCKEDBUFFWIN|CMD_TOGGLE_AUDIO_TRIGGER_WINDOW|CMD_CLIPBOARD_PASTE|CMD_OPEN_EQPLAYERS|CMD_TOGGLE_AURAWND|CMD_TOGGLE_BLOCKEDPETBUFFWIN|CMD_TOGGLE_REWARD_SELECTION_WIN|CMD_TOGGLE_CLAIM_WIN|CMD_TOGGLE_VOICE_BAR|CMD_TOGGLE_AS_LIST|CMD_PUSH_TO_TALK|CMD_PUSH_TO_TALK_SAY|CMD_PUSH_TO_TALK_GROUP|CMD_PUSH_TO_TALK_RAID|CMD_PUSH_TO_TALK_GUILD|CMD_MERCENARIES|CMD_MARKETPLACE|CMD_WELCOMESCREEN|CMD_EXTENDED_TARGET_WINDOW|CMD_ACHIEVEMENT_WINDOW|TARGET_XTARGET_1|TARGET_XTARGET_2|TARGET_XTARGET_3|TARGET_XTARGET_4|TARGET_XTARGET_5|TARGET_XTARGET_6|TARGET_XTARGET_7|TARGET_XTARGET_8|TARGET_XTARGET_9|TARGET_XTARGET_10|TARGET_XTARGET_11|TARGET_XTARGET_12|TARGET_XTARGET_13|TARGET_XTARGET_14|TARGET_XTARGET_15|TARGET_XTARGET_16|TARGET_XTARGET_17|TARGET_XTARGET_18|TARGET_XTARGET_19|TARGET_XTARGET_20|ADD_XTARGET|REMOVE_XTARGET|CYCLE_XTARGET|REMOVE_XTARGET_BY_SLOT|CMD_REAL_ESTATE_ITEMS_WINDOW|CMD_REAL_ESTATE_MANAGE_WINDOW|CMD_REAL_ESTATE_TROPHIES_WINDOW|CMD_REAL_ESTATE_PLOT_SEARCH_WINDOW|CMD_REAL_ESTATE_HELP_WINDOW|CMD_REAL_ESTATE_ITEM_PLACEMENT_TOGGLE_MODE|CMD_REAL_ESTATE_ITEM_PLACEMENT_SET_MODE_COLLISION|CMD_REAL_ESTATE_ITEM_PLACEMENT_SET_MODE_WALL|CMD_REAL_ESTATE_ITEM_PLACEMENT_SET_MODE_CURSOR|CMD_REAL_ESTATE_ITEM_PLACEMENT_SET_MODE_FREE|CMD_REAL_ESTATE_ITEM_PLACEMENT_RESET_ITEM_MOUSE_X_ROTATION|CMD_REAL_ESTATE_ITEM_PLACEMENT_RESET_ITEM_MOUSE_Y_ROTATION|CMD_REAL_ESTATE_ITEM_PLACEMENT_RESET_ITEM_WHEEL_ROTATION|CMD_REAL_ESTATE_ITEM_PLACEMENT_RESET_ITEM_SIZE|CMD_REAL_ESTATE_ITEM_PLACEMENT_ROTATE_ITEM_MOUSE_X_ROTATION_90_DEGREES|CMD_REAL_ESTATE_ITEM_PLACEMENT_ROTATE_ITEM_MOUSE_Y_ROTATION_90_DEGREES|CMD_REAL_ESTATE_ITEM_PLACEMENT_ROTATE_ITEM_WHEEL_ROTATION_90_DEGREES|CMD_REAL_ESTATE_LEAVE|CMD_VOTE_RESULTS|CMD_TOGGLE_TCG|CMD_MOVE_DOWN|CMD_STOP_ACTION|POTION_SLOT_5|CMD_TOGGLE_ALARM|CMD_TOGGLE_BANK_BAGS|TOGGLE_ZONE_GUIDE_WINDOW|TOGGLE_ZONE_PATH_WINDOW|CMD_MARKETPLACE_SILVER|CMD_MARKETPLACE_GOLD|CMD_HISTORIC_ALERTS|CMD_SOCIAL_SHARE|CMD_TOGGLE_AGGRO|CMD_LOCK_AGGRO|CMD_TOGGLE_BARTER_SEARCH|CMD_OPEN_URL|CMD_TOGGLE_TARGETOFTARGETWIN|CMD_RAID_DELEGATE_MAIN_ASSIST|CMD_INSPECT_BUFFS|CMD_GROUP_DELEGATE_MARK_NPC|CMD_RAID_DELEGATE_MARK_NPC|CMD_GROUP_MARK_NPC_1|CMD_GROUP_MARK_NPC_2|CMD_GROUP_MARK_NPC_3|CMD_RAID_MARK_NPC_1|CMD_RAID_MARK_NPC_2|CMD_RAID_MARK_NPC_3|CMD_FIND_PC_GROUP_RAID|CMD_TOGGLE_KEYRINGS|CMD_GROUP_DELEGATE_MASTER_LOOTER|CMD_RAID_DELEGATE_MASTER_LOOTER|CMD_TOGGLE_ADVANCED_LOOT_WIN|CMD_TOGGLE_PICKZONE_WIN|CMD_TOGGLE_TASK_OVERLAY_WIN|TOGGLE_FPS|TOGGLE_AVATAR|TOGGLE_PETITION|TOGGLE_MEMINFO|FLY_UP|FLY_DOWN|ADD_ROUTE|LAY_PPOINT|LAY_LINK|CONFIRM_YES|CONFIRM_NO|TARGET_PREV_NPC|TARGET_NEXT_NPC|ROTATE_STATS|TOGGLE_NPC_TUNE|TOGGLEQAMARKER)\\b)",
			"captures": { "0": {"name": "constant.language.mq2macro"}}
		},
		"echosubstring": {
			"match": "[^\\s\\$]+",
			"captures": { "0": {"name": "string.unquoted.mq2macro"}}
		},
		"subnamepartial": {
			"match": "[^\\s\\$\\|]+",
			"captures": { "0": {"name": "entity.name.function.mq2macro"}}
		},
		"quotedsearchstring": {
			"match": "\\\"[_[:alnum:]]*\\\"",
			"captures": {"0": {"name": "string.quoted.mq2macro"}}
		},
		"sqbracketdelimiterold": {
			"match": "(?<vb>(\\[)((?:[^\\[\\]]|\\g<vb>)+)(\\]))",
			"captures": {
				"2": { "name": "punctuation.separator.variable.mq2macro" },
				"3": {
					"patterns": [
						{"include": "#sqbracketcontents"},
						{"include": "#invalid-illegalcharacters"}
					]
				},
				"4": { "name": "punctuation.separator.variable.mq2macro" }
			}
		},
		"sqbracketdelimiter": {
			"begin": "\\s*\\[",
			"beginCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"end": "\\s*\\]",
			"endCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"patterns": [
				{"include": "#sqbracketcontents"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"sqbracketformuladelimiter": {
			"begin": "\\s*\\[",
			"beginCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"end": "\\s*\\]",
			"endCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"patterns": [
				{"include": "#formula"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"ifblockdelimiter": {
			"begin": "(?<=\\))\\s*{",
			"beginCaptures": {"0": {"name": "punctuation.parenthesis.open.mq2macro"}},
			"end": "^\\s*(})( else )?",
			"endCaptures": {
				"1": {"name": "punctuation.parenthesis.open.mq2macro"},
				"2": {"name": "keyword.control.alert.mq2macro"}
			},
			"patterns": [
				{"include": "#subbody"},
				{"include": "#invalid-illegalcharacter"}	
			]
		},
		"sqbracketcontents": {
			"match":"(?i)(((<<|>>|-))?(\\d*\\.?\\d+)|((\\!|<<|>>|-))?((?<pb>\\((?:[^\\(\\)]|\\g<pb>)+\\)))|((\\!|<<|>>|-|=))?(([ '\\.:_\\-[:alnum:]]|(?<vb>\\$\\{(?:[^\\$\\}]|\\g<vb>)+\\}))+)|(\\!)?(true|false)|(null)|(=?)([_[:alpha:]][ '\\.:_\\-[:alnum:]]*)|(=?)(\"[_[:alpha:]][ '\\.:_\\-[:alnum:]]*\"))((\\()(argb|bool|body|byte|class|corpse|deity|float|heading|int|invslot|ticks|race|raidmember)(\\)))?\\s*((,)|(?=\\]))",
			"captures": {
				"3": {"name": "keyword.operator.mq2macro"},
				"4": {"patterns": [{"include": "#constantdecimal"},{"include": "#invalid-illegalcharacter"}]},
				"6": {"name": "keyword.operator.mq2macro"},
				"7": {"patterns": [{"include": "#formula-par"},{"include": "#invalid-illegalcharacter"}]},
				"10": {"name": "keyword.operator.mq2macro"},
				"11": {"patterns": 
					[{"include": "#variabledelimiter"},
					{"include": "#strings"},
					{"include": "#substringparam"},
					{"include": "#invalid-illegalcharacter"}
					]},
				"14": {"name": "keyword.operator.mq2macro"},
				"15": {"patterns": [{"include": "#constantbool"},{"include": "#invalid-illegalcharacter"}]},
				"16": {"name": "constant.language.truefalse.mq2macro"},
				"17": {"name": "keyword.operator.mq2macro"},
				"18": {"name": "string.unquoted.mq2macro"},
				"19": {"name": "keyword.operator.mq2macro"},
				"20": {"name": "string.quoted.mq2macro"},
				"22": {"name": "punctuation.separator.plusminus.mq2macro"},
				"23": {"name": "support.type.immediate.mq2macro" },
				"24": {"name": "punctuation.separator.plusminus.mq2macro"},
				"26": {"name": "keyword.operator.mq2macro"}
			}
		},
		"punctuation-comma": {
			"name": "punctuation.separator.comma.mq2macro",
			"match": ","
		}
	},
	"scopeName": "source.mq2macro"
}